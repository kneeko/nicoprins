!function(){function a(){var a=$(".content");a.find("a[data-section]").click(function(a){var e=$(this);a.preventDefault();var n=e.attr("data-section");$("nav a.active").removeClass("active"),$('nav a[data-section="'+n+'"]').addClass("active");var i=e.attr("href"),o=e.attr("title");t(i,o)})}function t(e){var n=$(".content"),i=(n.attr("data-view"),"/fragment"+e),o=$(".spinner");n.attr("data-view",e);var r,s="/work"!=e?e:"/",c=Date.now(),v=!0,l=!1,d=!1,m=315,u=function(){l=!0;var a=Date.now()-c;a>m&&(n.removeClass("loading"),o.removeClass("active")),s!=location.pathname&&history.pushState(null,null,s)};window.setTimeout(function(){l||(n.addClass("loading"),o.addClass("active"))},m);var f=function(a){r=$(a),p(r)},p=function(e){d||(e.find("img").each(function(){new RetinaImage(this)}),e.find("a:not(.external)").click(function(a){var e=$(this);a.preventDefault();var n=e.attr("data-section");$("nav a.active").removeClass("active"),$('nav a[data-section="'+n+'"]').addClass("active");var i=e.attr("href"),o=e.attr("title");t(i,o)}),n.html(e),a())};v&&$.ajax({url:i,type:"GET",dataType:"html",success:f,complete:u})}WebFontConfig={google:{families:["Open+Sans:400,700:latin"]}};var e=function(){var a=document.createElement("script");a.src="//ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",a.type="text/javascript",a.async="true";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(a,t)},n=requestAnimationFrame||mozRequestAnimationFrame||webkitRequestAnimationFrame||msRequestAnimationFrame;n?n(e):window.addEventListener("load",e),$("nav a[data-section]").click(function(a){var e=$(this);a.preventDefault(),$("a.active").removeClass("active");var n=e.attr("data-section");$("nav a.active").removeClass("active"),$('nav a[data-section="'+n+'"]').addClass("active");var i=e.attr("href"),o=e.attr("title");t(i,o)}),window.addEventListener("popstate",function(){t(location.pathname)}),a()}();